---
const people = [
{first_name:'Алла', last_name:'Плешко', birthday: '17.04.1954'},
{first_name:'Владимир', last_name:'Плешко', birthday: '17.04.1951'},
{first_name:'Елена', last_name:'Плешко', birthday: '18.05.1988'},
];
var date = new Date();
// var month = date.getMonth() + 1;
// var day = date.getDate();
var month = 4;
var day = 17;
month = month > 9 ? month : '0' + month;
day = day > 9 ? day : '0' + day;
var arr = [day, month];
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>Birthdays</title>
	</head>
	<body>
		<!-- <div>{month}</div>
		<div>{day}</div>
		<h1>Birthdays</h1>
		<ul role="list">
			{(people.filter(((person) => (person.birthday.split('.')[0] === '17' && person.birthday.split('.')[1] === '04')), arr=[{day}, {month}])).map((person) => <li>
				<div">
				<tr>
					<td>{person.first_name}</td>
					<td>{person.last_name}</td>
					<td>{person.birthday}</td>
				</tr>
				</div>
			</li>)}
		</ul> -->
<script>
	import List from "list.js";
  function isBirthday(value) {
    if (typeof value !== 'object') {
        return false;
    }
    const birthParts = value.birthday.split(".");
    const birthMonth = parseInt(birthParts[1]);
    const birthDay = parseInt(birthParts[0]);
    const birthOffset = birthMonth * 100 + birthDay;

    const nowDate = new Date();
    const nowMonth = nowDate.getMonth() + 1;
    const nowDay = nowDate.getDate();
    const nowOffset = nowMonth * 100 + nowDay;

    return birthOffset === nowOffset;
  }

	var options = {
  valueNames: [ 'name', 'birthday'],
  item: '<li><h3 class="name"></h3><p class="birthday"></p></li>'
};
var values = [
{name:'Алла Плешко', birthday: '16.07.1954'},
{name:'Владимир Плешко', birthday: '16.07.1951'},
{name:'Елена Плешко', birthday: '18.05.1988'},
];

var newValues = values.filter(isBirthday);
var userList = new List('users', options, newValues);

</script>
<div id="users">
  <ul class="list"></ul>
</div>
<style>


h2 {
  font-family:sans-serif;
}
.list {
  font-family:sans-serif;
  margin:0;
  padding:20px 0 0;
}
.list > li {
  display:block;
  background-color: #eee;
  padding:10px;
  box-shadow: inset 0 1px 0 #fff;
}
.avatar {
  max-width: 150px;
}
img {
  max-width: 100%;
}
h3 {
  font-size: 16px;
  margin:0 0 0.3rem;
  font-weight: normal;
  font-weight:bold;
}
p {
  margin:0;
}

input {
  border:solid 1px #ccc;
  border-radius: 5px;
  padding:7px 14px;
  margin-bottom:10px
}
input:focus {
  outline:none;
  border-color:#aaa;
}
.sort {
  padding:8px 30px;
  border-radius: 6px;
  border:none;
  display:inline-block;
  color:#fff;
  text-decoration: none;
  background-color: #28a8e0;
  height:30px;
}
.sort:hover {
  text-decoration: none;
  background-color:#1b8aba;
}
.sort:focus {
  outline:none;
}
.sort:after {
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-bottom: 5px solid transparent;
  content:"";
  position: relative;
  top:-10px;
  right:-5px;
}
.sort.asc:after {
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid #fff;
  content:"";
  position: relative;
  top:13px;
  right:-5px;
}
.sort.desc:after {
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-bottom: 5px solid #fff;
  content:"";
  position: relative;
  top:-10px;
  right:-5px;
}
</style>

	</body>
</html>
